# Chapter 14 - Add Controllers

Add Controllers presets can be used to insert controller messages after randomly selected notes in a sequence, or after all unprotected notes. Adding controllers is much like adding ornaments, except that controller events are generated instead of notes. The controller messages can be any of the defmed MIDI continuous controllers (CC events), after-touch (AT events), or pitch-bend (PB events). Up to 18 controller events can be added to each note, and both the amount and the timing can be modulated by the pitch or velocity of the note. Longer strings of controller data can be generated by looping. In addition, presets of this type can be used to add program change messages before notes. Delay, Type, & Value The controller events that are to be added are defined in the six rows of data fields in the upper part of the screen, after the words Delay, Type and Value. These three parameters define a controller change, and there are 18 cells of three data fields each on the screen. If you like, you can consider this area as three long rows of data rather than as six shorter ones: The three fields placed in each vertical group work together, but there is no logical linkage between the upper three fields and the lower three in the same column. The Delay parameter defines how many time steps after the note the controller event is to be inserted. Delay times are all relative to the note, not relative to previous delay times. To get, for example, a series of controllers separated by 1 step, enter delay values of 1, 2, 3, 4, and so on. A delay time of 0 will cause the event to fall on the same step as the note, but it will still be inserted in the file, and sent out over MIDI, after the note-on event. Unlike delay times in Ornaments presets, those in Add Controllers presets cannot be negative; the logic here is that before the note starts sounding, there is nothing to control. Normally, you will probably want to set the delay times in ascending order; it makes the screen easier to understand. However, controller events can be entered in any order. The program will not generate new controller events following a non-note event that is already in the sequence, but it will generate the new controller events without reference to their order on the Add Controllers screen. If the Type parameter is a positive integer, it corresponds to the MIDI controller number (0 - 127). A -1 is used to specify after-touch (AT) events and a -2 to specify pitch-bend (PB) events. Note that some of the continuous controllers are defined by the MIDI Specification in special ways; it's up to you and your synthesizer to determine the exact meaning of the controller events generated by the PVG. For advanced applications, you may find it entertaining to use several different types of controllers in a single preset. Using the Loop parameter to generate cycles of pitch-bends, modulation wheel movements, and loudness changes (controller 7) on a single sustained note can produce some quite striking results. If you have a Yamaha DX series instrument, try programming some patches to respond to breath controller (controller 2). The value parameter can be set anywhere in the range from -8192 to 8191. This is because MIDI pitch- bending is defined as a two-byte event (even though most synthesizers discard a number of the bits in the message). Controllers and after-touch have meaningful values from 0 to 127, but the PVG will not prevent you from assigning absurdly large or negative values in a preset; it just won't insert them into the sequence. Pgm & Offset These two data fields, at the top left of the screen, are used to add a program change (PG event) before a note or notes in the sequence. The number entered under Offset tells the program how many dock steps before the note you want the PG event to appear. The number entered must be positive, but the program will understand it as essentially negative -- that is, pointing backwards in time. The number of the program change cannot be varied; it will always be exactly what you specey. However, there are a couple of ways to introduce variab;1;ty. when using an individual Add Controllers preset to create a variation, you could speeey something other than 0 changes per Vary. In this situation, the PVG will choose a note or notes at random before which to insert the program change. It's also possible to set up a whole group of Add Controllers presets to do nothing but generate PG events, and then select these at random from a macro. Loop & length These parameters operate exactly like their counterparts in Ornaments presets. The value under Loop tells the program how many times to generate the series of controller events you have defined, and the value under length tells it how far apart the beginnings of successive iterations of the series are to be. The length value can be smaller than some of the Delay values for individual events; this will cause the iterations of the loop to be embedded among one another. COPY This button, at the upper right corner of the screen, is used to fill the data fields with controller events from the current sequence. The program expects to see one note (an ON event) followed by controller data. It will not begin filling the table unless it sees an initial note, and it stops filling the table when it encounters a second note. Split When highlighted, this button will cause the controller events that are generated to be stored on a track by themselves, rather than on a track that also contains the notes from the sequence being varied. Next Note Lim, Extend, & Duration These flags are used to tell the preset when to stop adding controllers to a sequence. This is especially when a loop is being used, but will work just as well with single sets of controllers. When Next Note Lim (limit) is highlighted, the program will not generate any controller events after the beginning of the note following the note to which they are logically attached. when Duration is highlighted, new events will not be generated after the end of the current note as defined by its duration value. when Extend is highlighted, the program will continue to generate controller events, if required by the definitions in the preset, after the final DE event in the sequence. Otherwise, the DE event will be considered the boundary of the variation, and no events will be generated beyond it. Modulation The timing (delay parameter) and values of the controller events created by a preset can be modulated by the pitch or velocity of the note to which controllers are being added. The modulation section is in the left center of the screen, where the columns are labelled Mod and Fix and the rows Pitch and Velocity. The four data fields on the left modulate the values of the controller events, while the four to the right of the word Delay modulate the time delay of the events. Except for the parameter that is being modulated, the two types of modulation work exactly the same way. Modulation works a bit differently in Add Controllers than it does in Ornaments, however: The number of iterations of the loop cannot be modulated, but modulation can be either positive or negative with respect to the starting values (those programmed in the top half of the screen). Pgm & Offset These two data fields, at the top left of the screen, are used to add a program change (PG event) before a note or notes in the sequence. The number entered under Offset tells the program how many clock steps before the note you want the PG event to appear. The number entered must be positive, but the program will understand it as essentially negative -- that is, pointing backwards in time. The number of the program change cannot be varied; it will always be exactly what you specey. However, there are a couple of ways to introduce variability. when using an individual Add Controllers preset to create a variation, you could specey something other than 0 Changes per Vary. In this situation, the PVG will choose a note or notes at random before which to insert the program change. It's also possible to set up a whole group of Add Controllers presets to do nothing but generate PG events, and then select these at random from a macro. Loop & length These parameters operate exactly like their counterparts in Ornaments presets. The value under Loop tells the program how many times to generate the series of controller events you have defmed, and the value under length tells it how far apart the beginnings of successive iterations of the series are to be. The length value can be smaller than some of the Delay values for individual events; this will cause the iterations of the loop to be embedded among one another. COPY This button, at the upper right corner of the screen, is used to fill the data fields with controller events from the current sequence. The program expects to see one note (an ON event) followed by controller data. It will not begin filling the table unless it sees an initial note, and it stops filling the table when it encounters a second note. In fact, there are two ways for modulation to be positive and two ways for it to be negative, leading to four possible logical conditions. The value of the Mod parameter can range from -99 to 99, and in addition the plus-sign icon to the right of each pair of Mod/Fix parameters can be switched on or off. when the Mod value is positive, controller values will be higher for higher values of the modulating parameter (the pitch or velocity of the note to which controllers are being added). when the Mod value is negative, the reverse condition occurs: Higher pitches or velocities will lead to lower controller values. The value entered on the top half of the screen is an upper or lower limit. Modulating this value from a single modulator can increase it or decrease it, but cannot do both. (Modulating from both pitch and velocity at the same time, with opposite signs, will allow the basic value to be both increased and decreased during the course of a single variation.) when the plus sign is highlighted, modulation will mcrease the value above this limit; that is, it will be a lower limit. when the plus sign is switched off, the limit will be an upper limit, and modulation will decrease the values. The Fix parameter links the limit value shown in the top half of the screen to a specific pitch or velocity value. For example, if a Fix value of 60 (corresponding to C4) is entered on the Pitch row, then the controller values, if modulated by pitch, will always be at the values entered in the top half of the screen when the controller events have been added to a C4. Whether they will be higher or lower than this with higher or lower pitches depends on the signs attached to the modulation, as explained above. The effects of modulation in the PVG are complex, and you will probably need to experiment to get the feel of things. If Value is set to 127, with Velocity Mod equal to 20, Fix at 127, and + turned off, the controller values added will exactly equal the velocity values of the preceding notes. If Fix is equal to 0, Value is 32, and + is on, then a note with 0 velocity will yield a controller value of 32, and a note with velocity 127 will get twice that, or 64. The Delay Mod settings allow you to control the timing of a controller sequence with the pitch or velocity of a note. The basic relationships between the Mod, Fix, Value, and + parameters are illustrated in the following figures: Figure 11 (Original PVG docs page 80) Figure 12 (Original PVG docs page 80) Figure 13 (Original PVG docs page 81)